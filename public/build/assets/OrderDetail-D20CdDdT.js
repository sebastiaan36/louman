import{d as X,m as V,q as Y,c,a as s,u as t,h as I,w as d,b as l,t as r,o as m,f as q,e as o,g as S,F as B,r as F,k as ee,i as te,p as T}from"./app-BWkMUOj0.js";import{d as se,T as le,_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dn78D6e6.js";import{d as ae}from"./index-BsePJUay.js";import{_ as k}from"./index-CmRnEYDX.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-CaR3pB-o.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-BA5i60jP.js";import{_ as oe}from"./Textarea.vue_vue_type_script_setup_true_lang-CA-zBs81.js";import{_ as U}from"./InputError.vue_vue_type_script_setup_true_lang-SpKhSQxS.js";import{_ as ne,a as re,b as ie,c as ue,d as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-l05cUyB2.js";import{_ as fe,a as ce,b as ve,c as pe,d as C}from"./SelectValue.vue_vue_type_script_setup_true_lang-CcpON6HN.js";import{_ as D,a as E,b as h,c as b,d as N,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-DnUgn-BT.js";import{S as be}from"./search-DSDeHU_-.js";import"./index-B2PbLsO6.js";import"./VisuallyHidden-W7F-o_9g.js";import"./useForwardExpose-dCgfLWKY.js";import"./useForwardPropsEmits-iTKbMAmZ.js";import"./createLucideIcon-CXo0_mfu.js";import"./check-DzduqV4t.js";import"./useFormControl-5ktiD1H9.js";const _e={class:"flex h-full flex-1 flex-col gap-6 p-6"},ge={class:"flex items-center justify-between"},ye={class:"text-2xl font-bold"},xe={class:"text-sm text-muted-foreground"},ke={class:"flex gap-2"},we={class:"grid gap-6 lg:grid-cols-3"},$e={class:"lg:col-span-2 space-y-6"},Ve={class:"rounded-lg border p-6"},Se=["src","alt"],Pe={key:1,class:"h-12 w-12 rounded bg-muted flex items-center justify-center text-muted-foreground text-xs"},Be={class:"rounded-lg border p-6"},Ce={class:"space-y-2 text-sm"},he={class:"ml-2"},je={class:"ml-2"},qe={class:"ml-2"},Fe={key:0},ze={class:"ml-2"},Te={key:0,class:"rounded-lg border p-6"},Oe={class:"text-muted-foreground"},Ue={class:"space-y-6"},De={class:"rounded-lg border p-6"},Ee={class:"space-y-4"},Ne={class:"space-y-2"},Ae={class:"rounded-lg border p-6"},Ge={class:"space-y-1 text-sm"},Le={class:"font-medium"},Me={class:"rounded-lg border p-6"},Ke={class:"flex justify-between items-center text-lg font-bold"},Qe={class:"relative w-full mb-4"},Re={class:"relative"},Ze={key:0,class:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-md max-h-[300px] overflow-y-auto"},He=["onClick"],Je={class:"font-medium"},We={class:"text-sm text-muted-foreground"},Xe={key:1,class:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-md p-3 text-sm text-muted-foreground text-center"},Ye={class:"flex justify-end gap-2"},gt=X({__name:"OrderDetail",props:{order:{},availableProducts:{}},setup(n){const f=n,A=[{title:"Dashboard",href:ae().url},{title:"Bestellingen",href:"/admin/orders"},{title:f.order.order_number}],w=V(f.order.status),P=V(!1),$=V(!1),g=V(""),y=V(!1),u=Y({items:f.order.items.map(i=>({id:i.id,product_id:i.product_id,quantity:i.quantity})),notes:f.order.notes||""}),j=te(()=>{if(!g.value)return f.availableProducts.slice(0,10);const i=g.value.toLowerCase();return f.availableProducts.filter(e=>e.title.toLowerCase().includes(i)).slice(0,10)}),G=()=>!["completed","cancelled"].includes(f.order.status),L=()=>{u.items=f.order.items.map(i=>({id:i.id,product_id:i.product_id,quantity:i.quantity})),u.notes=f.order.notes||"",g.value="",y.value=!1,$.value=!0},M=i=>{const e=f.availableProducts.find(v=>v.id===i);if(!e)return;const a=u.items.find(v=>v.product_id===i);a?a.quantity+=1:u.items.push({id:null,product_id:e.id,quantity:1}),g.value="",y.value=!1},K=()=>{y.value=!0},Q=()=>{setTimeout(()=>{y.value=!1},200)},R=i=>{u.items.splice(i,1)},Z=()=>{u.patch(`/admin/orders/${f.order.id}`,{preserveScroll:!0,onSuccess:()=>{$.value=!1}})},x=i=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(typeof i=="string"?parseFloat(i):i),H=i=>({pending:"secondary",confirmed:"default",completed:"default",cancelled:"destructive"})[i]||"secondary",J=()=>{w.value!==f.order.status&&(P.value=!0,T.patch(`/admin/orders/${f.order.id}/status`,{status:w.value},{preserveScroll:!0,onFinish:()=>{P.value=!1}}))},W=()=>{T.visit("/admin/orders")};return(i,e)=>(m(),c(B,null,[s(t(I),{title:`Bestelling ${n.order.order_number}`},null,8,["title"]),s(de,{breadcrumbs:A},{default:d(()=>[l("div",_e,[l("div",ge,[l("div",null,[l("h1",ye,"Bestelling "+r(n.order.order_number),1),l("p",xe," Geplaatst op "+r(n.order.created_at),1)]),l("div",ke,[G()?(m(),q(t(k),{key:0,variant:"outline",onClick:L},{default:d(()=>[...e[5]||(e[5]=[o(" Bestelling aanpassen ",-1)])]),_:1})):S("",!0),s(t(k),{variant:"outline",onClick:W},{default:d(()=>[...e[6]||(e[6]=[o(" â† Terug naar bestellingen ",-1)])]),_:1})])]),l("div",we,[l("div",$e,[l("div",Ve,[e[12]||(e[12]=l("h2",{class:"text-lg font-semibold mb-4"},"Producten",-1)),s(t(D),null,{default:d(()=>[s(t(E),null,{default:d(()=>[s(t(h),null,{default:d(()=>[s(t(b),{class:"w-20"},{default:d(()=>[...e[7]||(e[7]=[o("Foto",-1)])]),_:1}),s(t(b),null,{default:d(()=>[...e[8]||(e[8]=[o("Product",-1)])]),_:1}),s(t(b),null,{default:d(()=>[...e[9]||(e[9]=[o("Prijs",-1)])]),_:1}),s(t(b),null,{default:d(()=>[...e[10]||(e[10]=[o("Aantal",-1)])]),_:1}),s(t(b),null,{default:d(()=>[...e[11]||(e[11]=[o("Subtotaal",-1)])]),_:1})]),_:1})]),_:1}),s(t(N),null,{default:d(()=>[(m(!0),c(B,null,F(n.order.items,(a,v)=>(m(),q(t(h),{key:v},{default:d(()=>[s(t(_),null,{default:d(()=>[a.product_thumbnail?(m(),c("img",{key:0,src:a.product_thumbnail,alt:a.product_title,class:"h-12 w-12 rounded object-cover"},null,8,Se)):(m(),c("div",Pe," Geen foto "))]),_:2},1024),s(t(_),{class:"font-medium"},{default:d(()=>[o(r(a.product_title),1)]),_:2},1024),s(t(_),null,{default:d(()=>[o(r(x(a.price)),1)]),_:2},1024),s(t(_),null,{default:d(()=>[o(r(a.quantity)+"x",1)]),_:2},1024),s(t(_),{class:"font-medium"},{default:d(()=>[o(r(x(a.subtotal)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",Be,[e[17]||(e[17]=l("h2",{class:"text-lg font-semibold mb-4"},"Klantgegevens",-1)),l("div",Ce,[l("div",null,[e[13]||(e[13]=l("span",{class:"font-medium"},"Bedrijf:",-1)),l("span",he,r(n.order.customer.company_name),1)]),l("div",null,[e[14]||(e[14]=l("span",{class:"font-medium"},"Contactpersoon:",-1)),l("span",je,r(n.order.customer.contact_person),1)]),l("div",null,[e[15]||(e[15]=l("span",{class:"font-medium"},"Telefoon:",-1)),l("span",qe,r(n.order.customer.phone_number),1)]),n.order.customer.email?(m(),c("div",Fe,[e[16]||(e[16]=l("span",{class:"font-medium"},"Email:",-1)),l("span",ze,r(n.order.customer.email),1)])):S("",!0)])]),n.order.notes?(m(),c("div",Te,[e[18]||(e[18]=l("h2",{class:"text-lg font-semibold mb-2"},"Opmerkingen",-1)),l("p",Oe,r(n.order.notes),1)])):S("",!0)]),l("div",Ue,[l("div",De,[e[24]||(e[24]=l("h2",{class:"text-lg font-semibold mb-4"},"Status",-1)),l("div",Ee,[l("div",null,[s(t(se),{variant:H(n.order.status),class:"text-sm"},{default:d(()=>[o(r(n.order.status_label),1)]),_:1},8,["variant"])]),l("div",Ne,[s(t(z),{for:"status"},{default:d(()=>[...e[19]||(e[19]=[o("Status wijzigen",-1)])]),_:1}),s(t(fe),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a)},{default:d(()=>[s(t(ce),null,{default:d(()=>[s(t(ve))]),_:1}),s(t(pe),null,{default:d(()=>[s(t(C),{value:"pending"},{default:d(()=>[...e[20]||(e[20]=[o("In behandeling",-1)])]),_:1}),s(t(C),{value:"confirmed"},{default:d(()=>[...e[21]||(e[21]=[o("Bevestigd",-1)])]),_:1}),s(t(C),{value:"completed"},{default:d(()=>[...e[22]||(e[22]=[o("Voltooid",-1)])]),_:1}),s(t(C),{value:"cancelled"},{default:d(()=>[...e[23]||(e[23]=[o("Geannuleerd",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(t(k),{size:"sm",class:"w-full",onClick:J,disabled:P.value||w.value===n.order.status},{default:d(()=>[o(r(P.value?"Bezig...":"Status bijwerken"),1)]),_:1},8,["disabled"])])])]),l("div",Ae,[e[25]||(e[25]=l("h2",{class:"text-lg font-semibold mb-4"},"Afleveradres",-1)),l("div",Ge,[l("p",Le,r(n.order.delivery_address.name),1),l("p",null,r(n.order.delivery_address.street_name)+" "+r(n.order.delivery_address.house_number),1),l("p",null,r(n.order.delivery_address.postal_code)+" "+r(n.order.delivery_address.city),1)])]),l("div",Me,[e[27]||(e[27]=l("h2",{class:"text-lg font-semibold mb-4"},"Totaal",-1)),l("div",Ke,[e[26]||(e[26]=l("span",null,"Totaalbedrag:",-1)),l("span",null,r(x(n.order.total)),1)])])])])]),s(t(ne),{open:$.value,"onUpdate:open":e[4]||(e[4]=a=>$.value=a)},{default:d(()=>[s(t(re),{class:"max-w-3xl max-h-[90vh] overflow-y-auto"},{default:d(()=>[s(t(ie),null,{default:d(()=>[s(t(ue),null,{default:d(()=>[...e[28]||(e[28]=[o("Bestelling aanpassen",-1)])]),_:1}),s(t(me),null,{default:d(()=>[...e[29]||(e[29]=[o(" Pas de aantallen en opmerkingen van deze bestelling aan. ",-1)])]),_:1})]),_:1}),l("form",{onSubmit:ee(Z,["prevent"]),class:"space-y-6"},[l("div",null,[s(t(z),{class:"text-base font-semibold mb-4 block"},{default:d(()=>[...e[30]||(e[30]=[o("Producten",-1)])]),_:1}),l("div",Qe,[l("div",Re,[s(t(be),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(t(O),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),type:"text",placeholder:"Zoek product om toe te voegen...",class:"pl-10",onFocus:K,onBlur:Q,disabled:t(u).processing},null,8,["modelValue","disabled"])]),y.value&&j.value.length>0?(m(),c("div",Ze,[(m(!0),c(B,null,F(j.value,a=>(m(),c("div",{key:a.id,class:"px-3 py-2 hover:bg-accent cursor-pointer flex items-center justify-between",onClick:v=>M(a.id)},[l("span",Je,r(a.title),1),l("span",We,r(x(a.price)),1)],8,He))),128))])):S("",!0),y.value&&g.value&&j.value.length===0?(m(),c("div",Xe," Geen producten gevonden ")):S("",!0)]),s(t(D),null,{default:d(()=>[s(t(E),null,{default:d(()=>[s(t(h),null,{default:d(()=>[s(t(b),null,{default:d(()=>[...e[31]||(e[31]=[o("Product",-1)])]),_:1}),s(t(b),null,{default:d(()=>[...e[32]||(e[32]=[o("Prijs",-1)])]),_:1}),s(t(b),{class:"w-32"},{default:d(()=>[...e[33]||(e[33]=[o("Aantal",-1)])]),_:1}),s(t(b),{class:"w-20"})]),_:1})]),_:1}),s(t(N),null,{default:d(()=>[(m(!0),c(B,null,F(t(u).items,(a,v)=>(m(),q(t(h),{key:v},{default:d(()=>[s(t(_),{class:"font-medium"},{default:d(()=>[o(r(a.id?n.order.items.find(p=>p.id===a.id)?.product_title:n.availableProducts.find(p=>p.id===a.product_id)?.title),1)]),_:2},1024),s(t(_),null,{default:d(()=>[o(r(a.id?x(n.order.items.find(p=>p.id===a.id)?.price||0):x(n.availableProducts.find(p=>p.id===a.product_id)?.price||0)),1)]),_:2},1024),s(t(_),null,{default:d(()=>[s(t(O),{type:"number",modelValue:a.quantity,"onUpdate:modelValue":p=>a.quantity=p,modelModifiers:{number:!0},min:"1",step:"1",disabled:t(u).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),s(U,{message:t(u).errors[`items.${v}.quantity`],class:"mt-1"},null,8,["message"])]),_:2},1024),s(t(_),null,{default:d(()=>[s(t(k),{type:"button",variant:"ghost",size:"sm",onClick:p=>R(v),disabled:t(u).processing||t(u).items.length<=1},{default:d(()=>[s(t(le),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick","disabled"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",null,[s(t(z),{for:"notes",class:"mb-[15px] block"},{default:d(()=>[...e[34]||(e[34]=[o("Opmerkingen",-1)])]),_:1}),s(t(oe),{id:"notes",modelValue:t(u).notes,"onUpdate:modelValue":e[2]||(e[2]=a=>t(u).notes=a),placeholder:"Optionele opmerkingen over deze bestelling...",rows:"4",disabled:t(u).processing},null,8,["modelValue","disabled"]),s(U,{message:t(u).errors.notes,class:"mt-1"},null,8,["message"])]),l("div",Ye,[s(t(k),{type:"button",variant:"outline",onClick:e[3]||(e[3]=a=>$.value=!1),disabled:t(u).processing},{default:d(()=>[...e[35]||(e[35]=[o(" Annuleren ",-1)])]),_:1},8,["disabled"]),s(t(k),{type:"submit",disabled:t(u).processing},{default:d(()=>[o(r(t(u).processing?"Bezig...":"Opslaan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{gt as default};
