import{d as z,c as d,a as t,u as l,h as I,w as n,b as o,e as s,l as y,o as r,t as u,F as k,r as w,g as A,f as D,i as U,m as x,p as $,j as G}from"./app-Di3RSdmm.js";import{d as C,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-49QvIm49.js";import{_}from"./index-1LP7WDE3.js";import{a as O,b as R,c as E,d as h,_ as K}from"./DialogTitle.vue_vue_type_script_setup_true_lang-zo3iQN2W.js";import{_ as T}from"./DialogFooter.vue_vue_type_script_setup_true_lang-D9ispDPs.js";import{_ as W}from"./Label.vue_vue_type_script_setup_true_lang-BLRKX_ny.js";import{_ as q,a as H,b as j,c as f,d as J,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-BY8I1NHA.js";import{d as M}from"./index-BsePJUay.js";import"./index-BRBC5pXR.js";import"./VisuallyHidden-BKH4SjpI.js";import"./useForwardExpose-Bohi4aPY.js";import"./useForwardPropsEmits-BhcpKy4a.js";import"./createLucideIcon-DVVQDtR3.js";const Q={class:"flex h-full flex-1 flex-col gap-6 p-6"},X={class:"flex items-center justify-between"},Y={class:"flex gap-2"},Z={href:"/admin/products/export"},ee={key:0,class:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 text-sm"},te={class:"mb-2 font-medium text-yellow-800"},le={class:"list-inside list-disc space-y-1 text-yellow-700"},ne={key:1,class:"rounded-lg border border-dashed p-12 text-center"},se={key:2,class:"rounded-lg border"},ae=["src","alt"],oe={key:1,class:"h-12 w-12 rounded bg-muted flex items-center justify-center text-muted-foreground text-xs"},re={class:"font-medium"},ie={class:"flex gap-2 justify-end"},de={class:"space-y-4"},Ce=z({__name:"Products",props:{products:{}},setup(b){const V=[{title:"Dashboard",href:M().url},{title:"Producten"}],P=G(),g=U(()=>P.props.flash?.import_results),p=x(!1),v=x(null),c=x(!1),F=i=>{v.value=i.target.files?.[0]??null},S=()=>{if(!v.value)return;c.value=!0;const i=new FormData;i.append("csv_file",v.value),$.post("/admin/products/import",i,{onFinish:()=>{c.value=!1,p.value=!1,v.value=null}})},N=i=>{confirm("Weet je zeker dat je dit product wilt verwijderen?")&&$.delete(`/admin/products/${i}`,{preserveScroll:!0})},B=i=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(parseFloat(i));return(i,e)=>(r(),d(k,null,[t(l(I),{title:"Producten"}),t(L,{breadcrumbs:V},{default:n(()=>[o("div",Q,[o("div",X,[e[6]||(e[6]=o("div",null,[o("h1",{class:"text-2xl font-bold"},"Producten"),o("p",{class:"text-sm text-muted-foreground"}," Beheer productcatalogus ")],-1)),o("div",Y,[o("a",Z,[t(l(_),{variant:"outline"},{default:n(()=>[...e[3]||(e[3]=[s("CSV downloaden",-1)])]),_:1})]),t(l(_),{variant:"outline",onClick:e[0]||(e[0]=a=>p.value=!0)},{default:n(()=>[...e[4]||(e[4]=[s("CSV importeren",-1)])]),_:1}),t(l(y),{href:"/admin/products/create"},{default:n(()=>[t(l(_),null,{default:n(()=>[...e[5]||(e[5]=[s("Product toevoegen",-1)])]),_:1})]),_:1})])]),g.value?.skipped?.length?(r(),d("div",ee,[o("p",te," Overgeslagen rijen ("+u(g.value.skipped.length)+"): ",1),o("ul",le,[(r(!0),d(k,null,w(g.value.skipped,a=>(r(),d("li",{key:a},u(a),1))),128))])])):A("",!0),b.products.length===0?(r(),d("div",ne,[...e[7]||(e[7]=[o("p",{class:"text-muted-foreground"},"Geen producten gevonden",-1),o("p",{class:"text-sm text-muted-foreground mt-2"},' Klik op "Product toevoegen" om te beginnen ',-1)])])):(r(),d("div",se,[t(l(q),null,{default:n(()=>[t(l(H),null,{default:n(()=>[t(l(j),null,{default:n(()=>[t(l(f),{class:"w-20"},{default:n(()=>[...e[8]||(e[8]=[s("Foto",-1)])]),_:1}),t(l(f),null,{default:n(()=>[...e[9]||(e[9]=[s("Naam",-1)])]),_:1}),t(l(f),null,{default:n(()=>[...e[10]||(e[10]=[s("Categorie",-1)])]),_:1}),t(l(f),null,{default:n(()=>[...e[11]||(e[11]=[s("Prijs",-1)])]),_:1}),t(l(f),null,{default:n(()=>[...e[12]||(e[12]=[s("Voorraad",-1)])]),_:1}),t(l(f),null,{default:n(()=>[...e[13]||(e[13]=[s("Artikelnr",-1)])]),_:1}),t(l(f),null,{default:n(()=>[...e[14]||(e[14]=[s("Status",-1)])]),_:1}),t(l(f),{class:"text-right"},{default:n(()=>[...e[15]||(e[15]=[s("Acties",-1)])]),_:1})]),_:1})]),_:1}),t(l(J),null,{default:n(()=>[(r(!0),d(k,null,w(b.products,a=>(r(),D(l(j),{key:a.id},{default:n(()=>[t(l(m),null,{default:n(()=>[a.photo_url?(r(),d("img",{key:0,src:a.photo_url,alt:a.title,class:"h-12 w-12 rounded object-cover"},null,8,ae)):(r(),d("div",oe," Geen foto "))]),_:2},1024),t(l(m),{class:"font-medium"},{default:n(()=>[s(u(a.title),1)]),_:2},1024),t(l(m),null,{default:n(()=>[s(u(a.category||"-"),1)]),_:2},1024),t(l(m),null,{default:n(()=>[o("span",re,u(B(a.price)),1)]),_:2},1024),t(l(m),null,{default:n(()=>[t(l(C),{variant:a.in_stock?"default":"destructive"},{default:n(()=>[s(u(a.in_stock?"Op voorraad":"Uitverkocht"),1)]),_:2},1032,["variant"])]),_:2},1024),t(l(m),{class:"font-mono text-sm"},{default:n(()=>[s(u(a.article_number),1)]),_:2},1024),t(l(m),null,{default:n(()=>[t(l(C),{variant:a.is_active?"default":"secondary"},{default:n(()=>[s(u(a.is_active?"Actief":"Inactief"),1)]),_:2},1032,["variant"])]),_:2},1024),t(l(m),{class:"text-right"},{default:n(()=>[o("div",ie,[t(l(y),{href:`/admin/products/${a.id}/edit`},{default:n(()=>[t(l(_),{size:"sm",variant:"outline"},{default:n(()=>[...e[16]||(e[16]=[s("Bewerken",-1)])]),_:1})]),_:1},8,["href"]),t(l(_),{size:"sm",variant:"destructive",onClick:ue=>N(a.id)},{default:n(()=>[...e[17]||(e[17]=[s(" Verwijderen ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))])]),_:1}),t(l(K),{open:p.value,"onUpdate:open":e[2]||(e[2]=a=>p.value=a)},{default:n(()=>[t(l(O),null,{default:n(()=>[t(l(R),null,{default:n(()=>[t(l(E),null,{default:n(()=>[...e[18]||(e[18]=[s("Producten importeren via CSV",-1)])]),_:1}),t(l(h),null,{default:n(()=>[...e[19]||(e[19]=[s(" Upload een CSV-bestand met productgegevens. Rijen zonder naam of artikelnummer worden overgeslagen. ",-1)])]),_:1})]),_:1}),o("div",de,[o("div",null,[t(l(W),null,{default:n(()=>[...e[20]||(e[20]=[s("CSV-bestand",-1)])]),_:1}),o("input",{type:"file",accept:".csv,.txt",class:"mt-1 block w-full text-sm",onChange:F},null,32)]),e[21]||(e[21]=o("div",{class:"rounded-md bg-muted p-3 text-xs text-muted-foreground space-y-1"},[o("p",{class:"font-medium"},"Verwachte kolomnamen (eerste rij):"),o("p",{class:"font-mono break-all leading-relaxed"}," article_number, title, description, price, category_id, weight, in_stock, is_active, ingredients, allergens, nutrition_energy, nutrition_fat, nutrition_saturated_fat, nutrition_carbohydrates, nutrition_sugars, nutrition_protein, nutrition_salt, nutrition_fiber "),o("p",{class:"mt-2"},[s("Gebruik "),o("code",{class:"font-mono"},"."),s(" als decimaalteken voor prijzen. Lege kolommen krijgen standaardwaarden.")])],-1))]),t(l(T),null,{default:n(()=>[t(l(_),{variant:"outline",onClick:e[1]||(e[1]=a=>p.value=!1)},{default:n(()=>[...e[22]||(e[22]=[s("Annuleren",-1)])]),_:1}),t(l(_),{disabled:!v.value||c.value,onClick:S},{default:n(()=>[s(u(c.value?"Importeren...":"Importeren"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{Ce as default};
