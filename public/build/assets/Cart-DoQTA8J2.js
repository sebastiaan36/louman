import{d as ee,m as w,c as m,a as s,u as t,h as te,w as l,b as a,e as o,t as r,o as i,l as V,F as S,r as P,f as j,g as h,n as k,i as T,p as A}from"./app-K1ubM81i.js";import{S as R,d as U,M as se,c as le,T as E,_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-C6auPS4c.js";import{d as ne}from"./index-BsePJUay.js";import{_ as c}from"./index-B2SDlZe3.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang-CTEOnJIr.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-s0XBMfK1.js";import{_ as oe}from"./Textarea.vue_vue_type_script_setup_true_lang-CZy2VnX-.js";import{_ as W,a as z}from"./CardContent.vue_vue_type_script_setup_true_lang-CAPipZBY.js";import{_ as q}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNEKf64s.js";import{_ as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-CvtTb137.js";import{_ as re,a as ue,b as ie,c as fe,d as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CezMNE8z.js";import{_ as ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Cd0_s5Au.js";import{_ as _e,a as ve,b as ge,c as pe,d as M}from"./SelectValue.vue_vue_type_script_setup_true_lang-DObxqdLQ.js";import{_ as xe,a as be,b as Q,c as x,d as ye,e as b}from"./TableHeader.vue_vue_type_script_setup_true_lang-CUx8CWFe.js";import{M as $e}from"./map-pin-Cift24PS.js";import{C as we}from"./clock-DTagqLK4.js";import"./index-BLz36Axw.js";import"./VisuallyHidden-DAJyTYt0.js";import"./useForwardExpose-HTniYRth.js";import"./useForwardPropsEmits-BFXe9T7F.js";import"./createLucideIcon-Dv2-4BTx.js";import"./check-wBjS0RwT.js";import"./useFormControl-CNrL0iXE.js";const ke={class:"flex h-full flex-1 flex-col gap-6 p-6"},Ae={class:"text-2xl font-bold flex items-center gap-2"},Ce={class:"text-sm text-muted-foreground"},Be={key:0,class:"rounded-lg border border-dashed p-12 text-center space-y-4"},je={key:1,class:"grid gap-6 lg:grid-cols-3"},he={class:"lg:col-span-2 space-y-6"},De={class:"rounded-lg border"},Ve=["src","alt"],Se={key:1,class:"h-16 w-16 rounded bg-muted flex items-center justify-center text-muted-foreground text-xs"},Te={key:0,class:"text-sm text-muted-foreground"},Fe={class:"flex items-center gap-2"},We={class:"space-y-6"},ze={class:"space-y-3"},qe={class:"flex items-center gap-2"},Ne={class:"text-sm text-muted-foreground"},Oe={class:"grid grid-cols-3 gap-2"},Ie={class:"text-center p-3 rounded-lg bg-muted"},Pe={class:"text-xs text-muted-foreground"},Re={class:"text-center p-3 rounded-lg bg-muted"},Ue={class:"text-xs text-muted-foreground"},Ee={class:"text-center p-3 rounded-lg bg-muted"},Me={class:"text-xs text-muted-foreground"},Qe={key:0,class:"text-sm text-orange-600 font-medium text-center"},Le={class:"space-y-2"},Ge={class:"flex justify-between text-sm"},Je={class:"flex justify-between text-sm"},He={class:"flex justify-between text-sm"},Ke={class:"flex justify-between text-lg font-bold pt-2 border-t"},Xe={class:"space-y-4 py-4"},Ye={class:"rounded-lg border p-4 bg-muted/50"},Ze={class:"text-sm mt-1"},et={class:"text-sm text-muted-foreground"},tt={class:"space-y-2"},st={class:"rounded-lg border p-4 bg-muted/50 space-y-2"},lt={class:"flex justify-between text-sm"},at={class:"flex justify-between text-sm"},nt={class:"flex justify-between items-center pt-2 border-t"},dt={class:"text-lg font-bold"},L=.09,Vt=ee({__name:"Cart",props:{cartItems:{},total:{},itemCount:{},deliveryAddresses:{},mainAddress:{},orderDeadline:{}},setup(u){const f=u,G=[{title:"Dashboard",href:ne().url},{title:"Winkelwagen"}],_=w(Object.fromEntries(f.cartItems.map(n=>[n.id,n.quantity]))),g=w("main"),C=T(()=>{if(g.value==="main")return{name:"Factuuradres",fullAddress:`${f.mainAddress.street} ${f.mainAddress.house_number}, ${f.mainAddress.postal_code} ${f.mainAddress.city}`};const n=f.deliveryAddresses.find(e=>e.id.toString()===g.value);return n?{name:n.name,fullAddress:`${n.street} ${n.house_number}, ${n.postal_code} ${n.city}`}:{name:"Factuuradres",fullAddress:`${f.mainAddress.street} ${f.mainAddress.house_number}, ${f.mainAddress.postal_code} ${f.mainAddress.city}`}}),O=T(()=>parseFloat(f.total)*L),I=T(()=>parseFloat(f.total)*(1+L)),v=n=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(typeof n=="string"?parseFloat(n):n),D=(n,e)=>{A.patch(`/customer/cart/${n}`,{quantity:e},{preserveScroll:!0,onSuccess:()=>{_.value[n]=e}})},J=n=>{const e=_.value[n.id]+1;D(n.id,e)},H=n=>{if(_.value[n.id]>1){const e=_.value[n.id]-1;D(n.id,e)}},K=n=>{confirm("Weet je zeker dat je dit product wilt verwijderen?")&&A.delete(`/customer/cart/${n}`,{preserveScroll:!0})},X=()=>{confirm("Weet je zeker dat je de hele winkelwagen wilt legen?")&&A.delete("/customer/cart",{preserveScroll:!0})},B=w(!1),y=w({delivery_address_id:null,notes:""}),p=w(!1),Y=()=>{y.value.delivery_address_id=g.value==="main"?null:g.value,B.value=!0},Z=()=>{console.log("submitOrder called"),p.value=!0;const n={delivery_address_id:y.value.delivery_address_id,notes:y.value.notes};console.log("Order data:",n),console.log("Posting to /customer/orders"),A.post("/customer/orders",n,{onBefore:()=>{console.log("Request starting...")},onStart:()=>{console.log("Request started")},onSuccess:e=>{console.log("Order placed successfully"),console.log("Response:",e),A.visit("/customer/orders")},onError:e=>{console.log("Order error:",e),p.value=!1},onFinish:()=>{console.log("Request finished"),p.value=!1}})};return(n,e)=>(i(),m(S,null,[s(t(te),{title:"Winkelwagen"}),s(ae,{breadcrumbs:G},{default:l(()=>[a("div",ke,[a("div",null,[a("h1",Ae,[s(t(R),{class:"h-6 w-6"}),e[4]||(e[4]=o(" Winkelwagen ",-1))]),a("p",Ce,r(u.itemCount)+" "+r(u.itemCount===1?"product":"producten")+" in je winkelwagen ",1)]),u.cartItems.length===0?(i(),m("div",Be,[s(t(R),{class:"h-16 w-16 mx-auto text-muted-foreground"}),e[6]||(e[6]=a("div",null,[a("p",{class:"text-lg font-medium text-muted-foreground"},"Je winkelwagen is leeg"),a("p",{class:"text-sm text-muted-foreground mt-2"}," Voeg producten toe om een bestelling te plaatsen ")],-1)),s(t(V),{href:"/customer/products"},{default:l(()=>[s(t(c),null,{default:l(()=>[...e[5]||(e[5]=[o(" Blader door producten ",-1)])]),_:1})]),_:1})])):(i(),m("div",je,[a("div",he,[a("div",De,[s(t(xe),null,{default:l(()=>[s(t(be),null,{default:l(()=>[s(t(Q),null,{default:l(()=>[s(t(x),{class:"w-24"},{default:l(()=>[...e[7]||(e[7]=[o("Foto",-1)])]),_:1}),s(t(x),null,{default:l(()=>[...e[8]||(e[8]=[o("Product",-1)])]),_:1}),s(t(x),null,{default:l(()=>[...e[9]||(e[9]=[o("Prijs",-1)])]),_:1}),s(t(x),{class:"w-40"},{default:l(()=>[...e[10]||(e[10]=[o("Aantal",-1)])]),_:1}),s(t(x),null,{default:l(()=>[...e[11]||(e[11]=[o("Subtotaal",-1)])]),_:1}),s(t(x),{class:"w-20"})]),_:1})]),_:1}),s(t(ye),null,{default:l(()=>[(i(!0),m(S,null,P(u.cartItems,d=>(i(),j(t(Q),{key:d.id},{default:l(()=>[s(t(b),null,{default:l(()=>[d.product_thumbnail?(i(),m("img",{key:0,src:d.product_thumbnail,alt:d.product_title,class:"h-16 w-16 rounded object-cover"},null,8,Ve)):(i(),m("div",Se," Geen foto "))]),_:2},1024),s(t(b),null,{default:l(()=>[a("div",null,[s(t(V),{href:`/customer/products/${d.product_id}`,class:"font-medium hover:underline"},{default:l(()=>[o(r(d.product_title),1)]),_:2},1032,["href"]),d.product_weight?(i(),m("p",Te,r(d.product_weight),1)):h("",!0),d.is_available?h("",!0):(i(),j(t(U),{key:1,variant:"destructive",class:"mt-1"},{default:l(()=>[...e[12]||(e[12]=[o(" Niet beschikbaar ",-1)])]),_:1}))])]),_:2},1024),s(t(b),null,{default:l(()=>[o(r(v(d.product_price)),1)]),_:2},1024),s(t(b),null,{default:l(()=>[a("div",Fe,[s(t(c),{size:"icon",variant:"outline",onClick:$=>H(d),disabled:_.value[d.id]<=1},{default:l(()=>[s(t(se),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),s(t(de),{modelValue:_.value[d.id],"onUpdate:modelValue":$=>_.value[d.id]=$,type:"number",min:"1",class:"text-center w-16",onBlur:$=>D(d.id,_.value[d.id])},null,8,["modelValue","onUpdate:modelValue","onBlur"]),s(t(c),{size:"icon",variant:"outline",onClick:$=>J(d)},{default:l(()=>[s(t(le),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024),s(t(b),{class:"font-medium"},{default:l(()=>[o(r(v(d.subtotal)),1)]),_:2},1024),s(t(b),null,{default:l(()=>[s(t(c),{size:"icon",variant:"ghost",onClick:$=>K(d.id)},{default:l(()=>[s(t(E),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),s(t(c),{variant:"outline",onClick:X},{default:l(()=>[s(t(E),{class:"h-4 w-4 mr-2"}),e[13]||(e[13]=o(" Winkelwagen legen ",-1))]),_:1})]),a("div",We,[s(t(W),null,{default:l(()=>[s(t(q),null,{default:l(()=>[s(t(N),{class:"flex items-center gap-2"},{default:l(()=>[s(t($e),{class:"h-5 w-5"}),e[14]||(e[14]=o(" Afleveradres ",-1))]),_:1})]),_:1}),s(t(z),{class:"space-y-4"},{default:l(()=>[a("div",ze,[s(t(F),null,{default:l(()=>[...e[15]||(e[15]=[o("Selecteer afleveradres",-1)])]),_:1}),s(t(_e),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=d=>g.value=d)},{default:l(()=>[s(t(ve),null,{default:l(()=>[s(t(ge),{placeholder:C.value.name},null,8,["placeholder"])]),_:1}),s(t(pe),null,{default:l(()=>[s(t(M),{value:"main"},{default:l(()=>[...e[16]||(e[16]=[o(" Factuuradres ",-1)])]),_:1}),(i(!0),m(S,null,P(u.deliveryAddresses,d=>(i(),j(t(M),{key:d.id,value:d.id.toString()},{default:l(()=>[a("div",qe,[a("span",null,r(d.name),1),d.is_default?(i(),j(t(U),{key:0,variant:"secondary",class:"text-xs"},{default:l(()=>[...e[17]||(e[17]=[o(" Standaard ",-1)])]),_:1})):h("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),a("div",Ne,r(C.value.fullAddress),1),s(t(V),{href:"/customer/delivery-addresses"},{default:l(()=>[s(t(c),{variant:"link",size:"sm",class:"p-0 h-auto"},{default:l(()=>[...e[18]||(e[18]=[o(" Beheer afleveradressen ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),s(t(W),{class:k({"border-orange-500":u.orderDeadline.is_urgent})},{default:l(()=>[s(t(q),null,{default:l(()=>[s(t(N),{class:"flex items-center gap-2"},{default:l(()=>[s(t(we),{class:k(["h-5 w-5",{"text-orange-500":u.orderDeadline.is_urgent}])},null,8,["class"]),e[19]||(e[19]=o(" Besteldeadline ",-1))]),_:1})]),_:1}),s(t(z),{class:"space-y-4 py-3"},{default:l(()=>[e[20]||(e[20]=a("p",{class:"text-sm text-muted-foreground"}," Bestel voor maandag 12:00 uur voor levering ",-1)),a("div",Oe,[a("div",Ie,[a("div",{class:k(["text-2xl font-bold",{"text-orange-500":u.orderDeadline.is_urgent}])},r(u.orderDeadline.days),3),a("div",Pe,r(u.orderDeadline.days===1?"dag":"dagen"),1)]),a("div",Re,[a("div",{class:k(["text-2xl font-bold",{"text-orange-500":u.orderDeadline.is_urgent}])},r(u.orderDeadline.hours),3),a("div",Ue,r(u.orderDeadline.hours===1?"uur":"uren"),1)]),a("div",Ee,[a("div",{class:k(["text-2xl font-bold",{"text-orange-500":u.orderDeadline.is_urgent}])},r(u.orderDeadline.minutes),3),a("div",Me,r((u.orderDeadline.minutes===1,"min")),1)])]),u.orderDeadline.is_urgent?(i(),m("div",Qe," ⚠️ Minder dan 24 uur resterend! ")):h("",!0)]),_:1})]),_:1},8,["class"]),s(t(W),null,{default:l(()=>[s(t(q),null,{default:l(()=>[s(t(N),null,{default:l(()=>[...e[21]||(e[21]=[o("Bestelling",-1)])]),_:1})]),_:1}),s(t(z),{class:"space-y-4 py-3"},{default:l(()=>[a("div",Le,[a("div",Ge,[e[22]||(e[22]=a("span",null,"Aantal producten:",-1)),a("span",null,r(u.itemCount),1)]),a("div",Je,[e[23]||(e[23]=a("span",{class:"text-muted-foreground"},"Subtotaal (ex. BTW):",-1)),a("span",null,r(v(u.total)),1)]),a("div",He,[e[24]||(e[24]=a("span",{class:"text-muted-foreground"},"BTW (9%):",-1)),a("span",null,r(v(O.value)),1)]),a("div",Ke,[e[25]||(e[25]=a("span",null,"Totaal (incl. BTW):",-1)),a("span",null,r(v(I.value)),1)])]),s(t(c),{size:"lg",class:"w-full",onClick:Y},{default:l(()=>[...e[26]||(e[26]=[o(" Bestelling plaatsen ",-1)])]),_:1}),e[27]||(e[27]=a("p",{class:"text-xs text-center text-muted-foreground"}," Betaling wordt offline verwerkt ",-1))]),_:1})]),_:1})])]))]),s(t(re),{open:B.value,"onUpdate:open":e[3]||(e[3]=d=>B.value=d)},{default:l(()=>[s(t(ue),{class:"sm:max-w-[500px]"},{default:l(()=>[s(t(ie),null,{default:l(()=>[s(t(fe),null,{default:l(()=>[...e[28]||(e[28]=[o("Bestelling plaatsen",-1)])]),_:1}),s(t(me),null,{default:l(()=>[...e[29]||(e[29]=[o(" Controleer je afleveradres en plaats je bestelling ",-1)])]),_:1})]),_:1}),a("div",Xe,[a("div",Ye,[s(t(F),{class:"text-sm font-medium"},{default:l(()=>[...e[30]||(e[30]=[o("Afleveradres",-1)])]),_:1}),a("p",Ze,r(C.value.name),1),a("p",et,r(C.value.fullAddress),1)]),a("div",tt,[s(t(F),{for:"notes"},{default:l(()=>[...e[31]||(e[31]=[o("Opmerkingen (optioneel)",-1)])]),_:1}),s(t(oe),{id:"notes",modelValue:y.value.notes,"onUpdate:modelValue":e[1]||(e[1]=d=>y.value.notes=d),placeholder:"Bijv. afleverinstructies...",rows:"3"},null,8,["modelValue"])]),a("div",st,[a("div",lt,[e[32]||(e[32]=a("span",{class:"text-muted-foreground"},"Subtotaal (ex. BTW):",-1)),a("span",null,r(v(u.total)),1)]),a("div",at,[e[33]||(e[33]=a("span",{class:"text-muted-foreground"},"BTW (9%):",-1)),a("span",null,r(v(O.value)),1)]),a("div",nt,[e[34]||(e[34]=a("span",{class:"font-medium"},"Totaal (incl. BTW):",-1)),a("span",dt,r(v(I.value)),1)])])]),s(t(ce),null,{default:l(()=>[s(t(c),{variant:"outline",onClick:e[2]||(e[2]=d=>B.value=!1),disabled:p.value},{default:l(()=>[...e[35]||(e[35]=[o(" Annuleren ",-1)])]),_:1},8,["disabled"]),s(t(c),{onClick:Z,disabled:p.value},{default:l(()=>[o(r(p.value?"Bezig...":"Bestelling plaatsen"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Vt as default};
