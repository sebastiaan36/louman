import{d as K,c as u,a as t,u as l,h as z,w as n,b as a,e as s,o as d,t as i,F as b,r as y,g as D,f as N,k as U,i as A,p as C,m as c,j as I}from"./app-Di3RSdmm.js";import{_ as v}from"./index-1LP7WDE3.js";import{_ as O,a as E,b as G,c as L,d as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-zo3iQN2W.js";import{_ as T}from"./DialogFooter.vue_vue_type_script_setup_true_lang-D9ispDPs.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-BLRKX_ny.js";import{_ as M,a as R,b as $,c as m,d as q,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-BY8I1NHA.js";import{U as H,_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-49QvIm49.js";import{d as Q}from"./index-BsePJUay.js";import"./useForwardPropsEmits-BhcpKy4a.js";import"./index-BRBC5pXR.js";import"./useForwardExpose-Bohi4aPY.js";import"./VisuallyHidden-BKH4SjpI.js";import"./createLucideIcon-DVVQDtR3.js";const W={class:"flex h-full flex-1 flex-col gap-6 p-6"},X={class:"flex items-start justify-between"},Y={class:"text-2xl font-bold flex items-center gap-2"},Z={class:"flex gap-2"},ee={href:"/admin/customers/export"},te={key:0,class:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 text-sm"},le={class:"mb-2 font-medium text-yellow-800"},ne={class:"list-inside list-disc space-y-1 text-yellow-700"},se={key:1,class:"rounded-lg border border-dashed p-12 text-center"},ae={key:2,class:"rounded-lg border"},oe={class:"space-y-4"},xe=K({__name:"Customers",props:{customers:{}},setup(x){const j=I(),k=A(()=>j.props.flash?.import_results),V=[{title:"Dashboard",href:Q().url},{title:"Klanten"}],w=r=>{C.visit(`/admin/customers/${r}`)},p=c(!1),_=c(null),g=c(!1),B=r=>{_.value=r.target.files?.[0]??null},S=()=>{if(!_.value)return;g.value=!0;const r=new FormData;r.append("csv_file",_.value),C.post("/admin/customers/import",r,{onFinish:()=>{g.value=!1,p.value=!1,_.value=null}})};return(r,e)=>(d(),u(b,null,[t(l(z),{title:"Klanten"}),t(J,{breadcrumbs:V},{default:n(()=>[a("div",W,[a("div",X,[a("div",null,[a("h1",Y,[t(l(H),{class:"h-6 w-6"}),e[3]||(e[3]=s(" Klanten ",-1))]),e[4]||(e[4]=a("p",{class:"text-sm text-muted-foreground"}," Overzicht van alle goedgekeurde klanten ",-1))]),a("div",Z,[a("a",ee,[t(l(v),{variant:"outline"},{default:n(()=>[...e[5]||(e[5]=[s("CSV downloaden",-1)])]),_:1})]),t(l(v),{variant:"outline",onClick:e[0]||(e[0]=o=>p.value=!0)},{default:n(()=>[...e[6]||(e[6]=[s("CSV importeren",-1)])]),_:1})])]),k.value?.skipped?.length?(d(),u("div",te,[a("p",le," Overgeslagen rijen ("+i(k.value.skipped.length)+"): ",1),a("ul",ne,[(d(!0),u(b,null,y(k.value.skipped,o=>(d(),u("li",{key:o},i(o),1))),128))])])):D("",!0),x.customers.length===0?(d(),u("div",se,[...e[7]||(e[7]=[a("p",{class:"text-muted-foreground"},"Geen klanten gevonden",-1)])])):(d(),u("div",ae,[t(l(M),null,{default:n(()=>[t(l(R),null,{default:n(()=>[t(l($),null,{default:n(()=>[t(l(m),null,{default:n(()=>[...e[8]||(e[8]=[s("Bedrijfsnaam",-1)])]),_:1}),t(l(m),null,{default:n(()=>[...e[9]||(e[9]=[s("Contactpersoon",-1)])]),_:1}),t(l(m),null,{default:n(()=>[...e[10]||(e[10]=[s("Email",-1)])]),_:1}),t(l(m),null,{default:n(()=>[...e[11]||(e[11]=[s("Telefoon",-1)])]),_:1}),t(l(m),null,{default:n(()=>[...e[12]||(e[12]=[s("Plaats",-1)])]),_:1}),t(l(m),null,{default:n(()=>[...e[13]||(e[13]=[s("Goedgekeurd op",-1)])]),_:1}),t(l(m))]),_:1})]),_:1}),t(l(q),null,{default:n(()=>[(d(!0),u(b,null,y(x.customers,o=>(d(),N(l($),{key:o.id,class:"cursor-pointer hover:bg-muted/50",onClick:F=>w(o.id)},{default:n(()=>[t(l(f),{class:"font-medium"},{default:n(()=>[s(i(o.company_name),1)]),_:2},1024),t(l(f),null,{default:n(()=>[s(i(o.contact_person),1)]),_:2},1024),t(l(f),null,{default:n(()=>[s(i(o.email),1)]),_:2},1024),t(l(f),null,{default:n(()=>[s(i(o.phone_number),1)]),_:2},1024),t(l(f),null,{default:n(()=>[s(i(o.city),1)]),_:2},1024),t(l(f),null,{default:n(()=>[s(i(o.approved_at),1)]),_:2},1024),t(l(f),{class:"text-right"},{default:n(()=>[t(l(v),{size:"sm",variant:"outline",onClick:U(F=>w(o.id),["stop"])},{default:n(()=>[...e[14]||(e[14]=[s(" Bekijk & bewerk ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]))]),t(l(O),{open:p.value,"onUpdate:open":e[2]||(e[2]=o=>p.value=o)},{default:n(()=>[t(l(E),null,{default:n(()=>[t(l(G),null,{default:n(()=>[t(l(L),null,{default:n(()=>[...e[15]||(e[15]=[s("Klanten importeren via CSV",-1)])]),_:1}),t(l(P),null,{default:n(()=>[...e[16]||(e[16]=[s(" Upload een CSV-bestand om bestaande klanten bij te werken. Klanten worden geïdentificeerd via de ",-1),a("strong",null,"id",-1),s(" kolom. ",-1)])]),_:1})]),_:1}),a("div",oe,[a("div",null,[t(l(h),null,{default:n(()=>[...e[17]||(e[17]=[s("CSV-bestand",-1)])]),_:1}),a("input",{type:"file",accept:".csv,.txt",class:"mt-1 block w-full text-sm",onChange:B},null,32)]),e[18]||(e[18]=a("div",{class:"rounded-md bg-muted p-3 text-xs text-muted-foreground space-y-1"},[a("p",{class:"font-medium"},"Verwachte kolomnamen (eerste rij):"),a("p",{class:"font-mono break-all leading-relaxed"}," id, company_name, contact_person, phone_number, street_name, house_number, postal_code, city, packing_slip_email, customer_category, discount_percentage, delivery_day, route_order, show_on_map "),a("p",{class:"mt-2"},[s(" Alleen kolommen die aanwezig zijn in het bestand worden bijgewerkt. Lege cellen worden overgeslagen. Alleen bestaande klanten worden bijgewerkt op basis van "),a("code",{class:"font-mono"},"id"),s(" — nieuwe klanten worden niet aangemaakt. ")])],-1))]),t(l(T),null,{default:n(()=>[t(l(v),{variant:"outline",onClick:e[1]||(e[1]=o=>p.value=!1)},{default:n(()=>[...e[19]||(e[19]=[s("Annuleren",-1)])]),_:1}),t(l(v),{disabled:!_.value||g.value,onClick:S},{default:n(()=>[s(i(g.value?"Importeren...":"Importeren"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{xe as default};
