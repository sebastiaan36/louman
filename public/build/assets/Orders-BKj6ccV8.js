import{d as O,c as g,b as r,t as f,F as C,r as U,g as V,f as y,w as a,a as l,u as t,e as s,n as z,l as x,o as m,m as $,z as F,h as X,p as I,i as Y,j as ee}from"./app-Di3RSdmm.js";import{_ as p}from"./index-1LP7WDE3.js";import{c as j}from"./createLucideIcon-DVVQDtR3.js";import{C as te,S as le,L as ae,c as se,d as ne,_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-49QvIm49.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang-BhJnLtwg.js";import{_ as P}from"./Label.vue_vue_type_script_setup_true_lang-BLRKX_ny.js";import{_ as N,a as A,b as D,c as E,d as v}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqTKe9tn.js";import{_ as oe,a as ue,b as q,c as h,d as ie,e as b}from"./TableHeader.vue_vue_type_script_setup_true_lang-BY8I1NHA.js";import{d as fe}from"./index-BsePJUay.js";import{S as me}from"./search-CodsYlhY.js";import{D as ce}from"./download-hK8zjiyJ.js";import"./index-BRBC5pXR.js";import"./VisuallyHidden-BKH4SjpI.js";import"./useForwardExpose-Bohi4aPY.js";import"./useForwardPropsEmits-BhcpKy4a.js";import"./check-E3qLcZEM.js";import"./useFormControl-CWyZg8VZ.js";const pe=j("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ve=j("ClipboardListIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const ge=j("FileArchiveIcon",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);const _e=j("SquareCheckBigIcon",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),he={key:0,class:"flex items-center justify-between gap-4 border-t px-4 py-3"},be={class:"text-sm text-muted-foreground"},ke={class:"flex items-center gap-1"},ye=O({__name:"Pagination",props:{links:{},currentPage:{},from:{},to:{},total:{},lastPage:{}},setup(u){const w=_=>_.replace("&laquo;","«").replace("&raquo;","»").replace("Previous","Vorige").replace("Next","Volgende");return(_,L)=>u.links&&u.lastPage>1?(m(),g("div",he,[r("div",be," Resultaten "+f(u.from)+" tot "+f(u.to)+" van "+f(u.total),1),r("div",ke,[(m(!0),g(C,null,U(u.links,(o,c)=>(m(),g(C,{key:c},[c===0?(m(),y(t(x),{key:0,href:o.url||"#",class:z({"pointer-events-none opacity-50":!o.url}),"preserve-state":""},{default:a(()=>[l(t(p),{variant:"outline",size:"sm",disabled:!o.url},{default:a(()=>[l(t(pe),{class:"h-4 w-4 mr-1"}),s(" "+f(w(o.label)),1)]),_:2},1032,["disabled"])]),_:2},1032,["href","class"])):c===u.links.length-1?(m(),y(t(x),{key:1,href:o.url||"#",class:z({"pointer-events-none opacity-50":!o.url}),"preserve-state":""},{default:a(()=>[l(t(p),{variant:"outline",size:"sm",disabled:!o.url},{default:a(()=>[s(f(w(o.label))+" ",1),l(t(te),{class:"h-4 w-4 ml-1"})]),_:2},1032,["disabled"])]),_:2},1032,["href","class"])):(m(),y(t(x),{key:2,href:o.url||"#",class:z({"pointer-events-none":!o.url}),"preserve-state":""},{default:a(()=>[l(t(p),{variant:o.active?"default":"outline",size:"sm",class:"min-w-[2.5rem]"},{default:a(()=>[s(f(o.label),1)]),_:2},1032,["variant"])]),_:2},1032,["href","class"]))],64))),128))])])):V("",!0)}}),xe={class:"flex h-full flex-1 flex-col gap-6 p-6"},we={class:"flex items-start justify-between"},Se={class:"text-2xl font-bold flex items-center gap-2"},$e={class:"flex gap-2"},Ve={href:"/admin/orders/production-list",target:"_blank"},Ce={href:"/admin/orders/customer-overview",target:"_blank"},je={class:"rounded-lg border p-4"},Be={class:"grid gap-4 md:grid-cols-4"},ze={class:"grid gap-2"},Pe={class:"relative"},Le={class:"grid gap-2"},Me={class:"flex items-end"},Fe={key:0,class:"rounded-lg border bg-muted/50 p-4"},Ie={class:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between"},Ne={class:"text-sm font-medium"},Ae={class:"flex flex-col gap-3 md:flex-row md:items-end"},De={class:"grid gap-2"},Ee={class:"flex gap-2"},qe={key:1,class:"rounded-lg border border-dashed p-12 text-center"},Oe={class:"text-sm text-muted-foreground mt-2"},Ue={key:2,class:"rounded-lg border"},Ge=["checked"],He=["checked","onChange"],Re={class:"flex items-center justify-between gap-4"},Te={key:0,class:"text-xs text-muted-foreground capitalize shrink-0"},Ze={class:"flex gap-2 justify-end"},Ke=["href"],mt=O({__name:"Orders",props:{orders:{},filters:{}},setup(u){const w=ee(),_=u,L=[{title:"Dashboard",href:fe().url},{title:"Bestellingen"}],o=$(_.filters.status||"all"),c=$(_.filters.search||""),i=$([]),k=$(""),M=()=>{const d=new URLSearchParams;o.value&&o.value!=="all"&&d.set("status",o.value),c.value&&d.set("search",c.value),I.get(`/admin/orders?${d.toString()}`,{},{preserveState:!0,preserveScroll:!0}),i.value=[]};F(o,()=>M()),F(c,()=>M());const G=d=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(parseFloat(d)),H=d=>({pending:"secondary",confirmed:"default",completed:"default",cancelled:"destructive"})[d]||"secondary",R=()=>{o.value="all",c.value=""},T=Y(()=>_.orders.data.length>0&&i.value.length===_.orders.data.length),Z=d=>{d===!0?i.value=_.orders.data.map(e=>e.id):i.value=[]},K=(d,e)=>{const n=i.value.indexOf(d);e===!0&&n===-1?i.value.push(d):e===!1&&n!==-1&&i.value.splice(n,1)},Q=d=>i.value.includes(d),W=()=>{i.value.length===0||!k.value||confirm(`Weet je zeker dat je ${i.value.length} ${i.value.length===1?"bestelling":"bestellingen"} wilt bijwerken?`)&&I.post("/admin/orders/bulk/update-status",{order_ids:i.value,status:k.value},{preserveScroll:!0,onSuccess:()=>{i.value=[],k.value=""}})},J=()=>{if(i.value.length===0)return;const d=document.createElement("form");d.method="POST",d.action="/admin/orders/bulk/download-packing-slips",d.style.display="none";const e=w.props.csrf_token||document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",n=document.createElement("input");n.type="hidden",n.name="_token",n.value=e,d.appendChild(n),i.value.forEach(B=>{const S=document.createElement("input");S.type="hidden",S.name="order_ids[]",S.value=B.toString(),d.appendChild(S)}),document.body.appendChild(d),d.submit(),document.body.removeChild(d)};return(d,e)=>(m(),g(C,null,[l(t(X),{title:"Bestellingen"}),l(re,{breadcrumbs:L},{default:a(()=>[r("div",xe,[r("div",we,[r("div",null,[r("h1",Se,[l(t(le),{class:"h-6 w-6"}),e[4]||(e[4]=s(" Bestellingen ",-1))]),e[5]||(e[5]=r("p",{class:"text-sm text-muted-foreground"}," Beheer alle klantbestellingen ",-1))]),r("div",$e,[r("a",Ve,[l(t(p),{variant:"outline"},{default:a(()=>[l(t(ve),{class:"h-4 w-4 mr-2"}),e[6]||(e[6]=s(" Productielijst ",-1))]),_:1})]),r("a",Ce,[l(t(p),{variant:"outline"},{default:a(()=>[l(t(ae),{class:"h-4 w-4 mr-2"}),e[7]||(e[7]=s(" Bestellingenoverzicht ",-1))]),_:1})]),l(t(x),{href:"/admin/orders/create"},{default:a(()=>[l(t(p),null,{default:a(()=>[l(t(se),{class:"h-4 w-4 mr-2"}),e[8]||(e[8]=s(" Nieuwe bestelling ",-1))]),_:1})]),_:1})])]),r("div",je,[r("div",Be,[r("div",ze,[l(t(P),{for:"search"},{default:a(()=>[...e[9]||(e[9]=[s("Zoeken",-1)])]),_:1}),r("div",Pe,[l(t(me),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l(t(de),{id:"search",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=n=>c.value=n),placeholder:"Bestelnummer of klant...",class:"pl-9"},null,8,["modelValue"])])]),r("div",Le,[l(t(P),{for:"status"},{default:a(()=>[...e[10]||(e[10]=[s("Status",-1)])]),_:1}),l(t(N),{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n)},{default:a(()=>[l(t(A),null,{default:a(()=>[l(t(D),{placeholder:"Alle statussen"})]),_:1}),l(t(E),null,{default:a(()=>[l(t(v),{value:"all"},{default:a(()=>[...e[11]||(e[11]=[s("Alle bestellingen",-1)])]),_:1}),l(t(v),{value:"pending"},{default:a(()=>[...e[12]||(e[12]=[s("In behandeling",-1)])]),_:1}),l(t(v),{value:"confirmed"},{default:a(()=>[...e[13]||(e[13]=[s("Bevestigd",-1)])]),_:1}),l(t(v),{value:"completed"},{default:a(()=>[...e[14]||(e[14]=[s("Voltooid",-1)])]),_:1}),l(t(v),{value:"cancelled"},{default:a(()=>[...e[15]||(e[15]=[s("Geannuleerd",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",Me,[l(t(p),{variant:"outline",onClick:R,disabled:o.value==="all"&&!c.value},{default:a(()=>[...e[16]||(e[16]=[s(" Filters wissen ",-1)])]),_:1},8,["disabled"])])])]),i.value.length>0?(m(),g("div",Fe,[r("div",Ie,[r("div",Ne,f(i.value.length)+" "+f(i.value.length===1?"bestelling":"bestellingen")+" geselecteerd ",1),r("div",Ae,[r("div",De,[l(t(P),{for:"bulkStatus"},{default:a(()=>[...e[17]||(e[17]=[s("Status wijzigen naar",-1)])]),_:1}),r("div",Ee,[l(t(N),{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=n=>k.value=n)},{default:a(()=>[l(t(A),{class:"w-[180px]"},{default:a(()=>[l(t(D),{placeholder:"Selecteer status"})]),_:1}),l(t(E),null,{default:a(()=>[l(t(v),{value:"pending"},{default:a(()=>[...e[18]||(e[18]=[s("In behandeling",-1)])]),_:1}),l(t(v),{value:"confirmed"},{default:a(()=>[...e[19]||(e[19]=[s("Bevestigd",-1)])]),_:1}),l(t(v),{value:"completed"},{default:a(()=>[...e[20]||(e[20]=[s("Voltooid",-1)])]),_:1}),l(t(v),{value:"cancelled"},{default:a(()=>[...e[21]||(e[21]=[s("Geannuleerd",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(t(p),{onClick:W,disabled:!k.value},{default:a(()=>[l(t(_e),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=s(" Bijwerken ",-1))]),_:1},8,["disabled"])])]),l(t(p),{variant:"outline",onClick:J},{default:a(()=>[l(t(ge),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=s(" Download pakbonnen (ZIP) ",-1))]),_:1})])])])):V("",!0),u.orders.data.length===0?(m(),g("div",qe,[e[24]||(e[24]=r("p",{class:"text-muted-foreground"},"Geen bestellingen gevonden",-1)),r("p",Oe,f(o.value||c.value?"Probeer een andere zoekopdracht of filter":"Er zijn nog geen bestellingen"),1)])):(m(),g("div",Ue,[l(t(oe),null,{default:a(()=>[l(t(ue),null,{default:a(()=>[l(t(q),null,{default:a(()=>[l(t(h),{class:"w-12"},{default:a(()=>[r("input",{type:"checkbox",checked:T.value,onChange:e[3]||(e[3]=n=>Z(n.target.checked)),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ge)]),_:1}),l(t(h),null,{default:a(()=>[...e[25]||(e[25]=[s("Bestelnummer",-1)])]),_:1}),l(t(h),null,{default:a(()=>[...e[26]||(e[26]=[s("Klant",-1)])]),_:1}),l(t(h),null,{default:a(()=>[...e[27]||(e[27]=[s("Datum",-1)])]),_:1}),l(t(h),null,{default:a(()=>[...e[28]||(e[28]=[s("Totaal",-1)])]),_:1}),l(t(h),null,{default:a(()=>[...e[29]||(e[29]=[s("Producten",-1)])]),_:1}),l(t(h),null,{default:a(()=>[...e[30]||(e[30]=[s("Status",-1)])]),_:1}),l(t(h),{class:"text-right"},{default:a(()=>[...e[31]||(e[31]=[s("Acties",-1)])]),_:1})]),_:1})]),_:1}),l(t(ie),null,{default:a(()=>[(m(!0),g(C,null,U(u.orders.data,n=>(m(),y(t(q),{key:n.id},{default:a(()=>[l(t(b),null,{default:a(()=>[r("input",{type:"checkbox",checked:Q(n.id),onChange:B=>K(n.id,B.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,He)]),_:2},1024),l(t(b),{class:"font-medium"},{default:a(()=>[s(f(n.order_number),1)]),_:2},1024),l(t(b),null,{default:a(()=>[r("div",Re,[r("span",null,f(n.customer_name),1),n.customer_delivery_day?(m(),g("span",Te,f(n.customer_delivery_day),1)):V("",!0)])]),_:2},1024),l(t(b),null,{default:a(()=>[s(f(n.created_at),1)]),_:2},1024),l(t(b),{class:"font-medium"},{default:a(()=>[s(f(G(n.total)),1)]),_:2},1024),l(t(b),null,{default:a(()=>[s(f(n.item_count)+" "+f(n.item_count===1?"product":"producten"),1)]),_:2},1024),l(t(b),null,{default:a(()=>[l(t(ne),{variant:H(n.status)},{default:a(()=>[s(f(n.status_label),1)]),_:2},1032,["variant"])]),_:2},1024),l(t(b),{class:"text-right"},{default:a(()=>[r("div",Ze,[l(t(x),{href:`/admin/orders/${n.id}`},{default:a(()=>[l(t(p),{size:"sm",variant:"outline"},{default:a(()=>[...e[32]||(e[32]=[s("Details",-1)])]),_:1})]),_:1},8,["href"]),r("a",{href:`/admin/orders/${n.id}/packing-slip`,target:"_blank"},[l(t(p),{size:"sm",variant:"outline"},{default:a(()=>[l(t(ce),{class:"h-4 w-4 mr-1"}),e[33]||(e[33]=s(" Pakbon ",-1))]),_:1})],8,Ke)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),u.orders.links&&u.orders.last_page>1?(m(),y(ye,{key:0,links:u.orders.links,"current-page":u.orders.current_page,from:u.orders.from,to:u.orders.to,total:u.orders.total,"last-page":u.orders.last_page},null,8,["links","current-page","from","to","total","last-page"])):V("",!0)]))])]),_:1})],64))}});export{mt as default};
