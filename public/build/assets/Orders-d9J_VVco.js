import{d as O,c as b,b as d,t as f,F as V,r as U,g as j,f as y,w as a,a as l,u as t,e as s,n as B,l as $,o as m,m as S,x as L,h as X,p as D,i as Y,j as ee}from"./app-BrijJP_8.js";import{C as te,S as le,d as ae,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-BYXqja6L.js";import{d as ne}from"./index-BsePJUay.js";import{_ as h}from"./index-DeWU2S-i.js";import{_ as P}from"./Label.vue_vue_type_script_setup_true_lang-C0XJT-t8.js";import{_ as re}from"./Input.vue_vue_type_script_setup_true_lang-B99hdn2K.js";import{_ as E,a as N,b as q,c as A,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-Byzwhmd6.js";import{_ as de,a as oe,b as M,c as v,d as ue,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-mjqiDdnS.js";import{c as z}from"./createLucideIcon-CyZTCRol.js";import{S as ie}from"./search-BVHnmgAX.js";import{D as fe}from"./download-fayX4qVf.js";import"./index-CT2AgVO1.js";import"./VisuallyHidden-CroJ5Ajx.js";import"./useForwardExpose-CXWfl3Hg.js";import"./useForwardPropsEmits-C1BjLh94.js";import"./check-uHMfNrRl.js";import"./useFormControl-sQCEaIxU.js";const me=z("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ce=z("FileArchiveIcon",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);const pe=z("SquareCheckBigIcon",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ge={key:0,class:"flex items-center justify-between gap-4 border-t px-4 py-3"},ve={class:"text-sm text-muted-foreground"},_e={class:"flex items-center gap-1"},be=O({__name:"Pagination",props:{links:{},currentPage:{},from:{},to:{},total:{},lastPage:{}},setup(u){const x=p=>p.replace("&laquo;","«").replace("&raquo;","»").replace("Previous","Vorige").replace("Next","Volgende");return(p,F)=>u.links&&u.lastPage>1?(m(),b("div",ge,[d("div",ve," Resultaten "+f(u.from)+" tot "+f(u.to)+" van "+f(u.total),1),d("div",_e,[(m(!0),b(V,null,U(u.links,(o,c)=>(m(),b(V,{key:c},[c===0?(m(),y(t($),{key:0,href:o.url||"#",class:B({"pointer-events-none opacity-50":!o.url}),"preserve-state":""},{default:a(()=>[l(t(h),{variant:"outline",size:"sm",disabled:!o.url},{default:a(()=>[l(t(me),{class:"h-4 w-4 mr-1"}),s(" "+f(x(o.label)),1)]),_:2},1032,["disabled"])]),_:2},1032,["href","class"])):c===u.links.length-1?(m(),y(t($),{key:1,href:o.url||"#",class:B({"pointer-events-none opacity-50":!o.url}),"preserve-state":""},{default:a(()=>[l(t(h),{variant:"outline",size:"sm",disabled:!o.url},{default:a(()=>[s(f(x(o.label))+" ",1),l(t(te),{class:"h-4 w-4 ml-1"})]),_:2},1032,["disabled"])]),_:2},1032,["href","class"])):(m(),y(t($),{key:2,href:o.url||"#",class:B({"pointer-events-none":!o.url}),"preserve-state":""},{default:a(()=>[l(t(h),{variant:o.active?"default":"outline",size:"sm",class:"min-w-[2.5rem]"},{default:a(()=>[s(f(o.label),1)]),_:2},1032,["variant"])]),_:2},1032,["href","class"]))],64))),128))])])):j("",!0)}}),he={class:"flex h-full flex-1 flex-col gap-6 p-6"},ke={class:"text-2xl font-bold flex items-center gap-2"},ye={class:"rounded-lg border p-4"},xe={class:"grid gap-4 md:grid-cols-4"},we={class:"grid gap-2"},Se={class:"relative"},$e={class:"grid gap-2"},Ve={class:"flex items-end"},Ce={key:0,class:"rounded-lg border bg-muted/50 p-4"},Be={class:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between"},Pe={class:"text-sm font-medium"},je={class:"flex flex-col gap-3 md:flex-row md:items-end"},ze={class:"grid gap-2"},Fe={class:"flex gap-2"},Ie={key:1,class:"rounded-lg border border-dashed p-12 text-center"},Le={class:"text-sm text-muted-foreground mt-2"},De={key:2,class:"rounded-lg border"},Ee=["checked"],Ne=["checked","onChange"],qe={class:"flex gap-2 justify-end"},Ae=["href"],at=O({__name:"Orders",props:{orders:{},filters:{}},setup(u){const x=ee(),p=u,F=[{title:"Dashboard",href:ne().url},{title:"Bestellingen"}],o=S(p.filters.status||""),c=S(p.filters.search||""),i=S([]),k=S(""),I=()=>{const r=new URLSearchParams;o.value&&r.set("status",o.value),c.value&&r.set("search",c.value),D.get(`/admin/orders?${r.toString()}`,{},{preserveState:!0,preserveScroll:!0}),i.value=[]};L(o,()=>I()),L(c,()=>I());const R=r=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(parseFloat(r)),T=r=>({pending:"secondary",confirmed:"default",completed:"default",cancelled:"destructive"})[r]||"secondary",G=()=>{o.value="",c.value=""},H=Y(()=>p.orders.data.length>0&&i.value.length===p.orders.data.length),Z=r=>{r===!0?i.value=p.orders.data.map(e=>e.id):i.value=[]},K=(r,e)=>{const n=i.value.indexOf(r);e===!0&&n===-1?i.value.push(r):e===!1&&n!==-1&&i.value.splice(n,1)},Q=r=>i.value.includes(r),W=()=>{i.value.length===0||!k.value||confirm(`Weet je zeker dat je ${i.value.length} ${i.value.length===1?"bestelling":"bestellingen"} wilt bijwerken?`)&&D.post("/admin/orders/bulk/update-status",{order_ids:i.value,status:k.value},{preserveScroll:!0,onSuccess:()=>{i.value=[],k.value=""}})},J=()=>{if(i.value.length===0)return;const r=document.createElement("form");r.method="POST",r.action="/admin/orders/bulk/download-packing-slips",r.style.display="none";const e=x.props.csrf_token||document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",n=document.createElement("input");n.type="hidden",n.name="_token",n.value=e,r.appendChild(n),i.value.forEach(C=>{const w=document.createElement("input");w.type="hidden",w.name="order_ids[]",w.value=C.toString(),r.appendChild(w)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r)};return(r,e)=>(m(),b(V,null,[l(t(X),{title:"Bestellingen"}),l(se,{breadcrumbs:F},{default:a(()=>[d("div",he,[d("div",null,[d("h1",ke,[l(t(le),{class:"h-6 w-6"}),e[4]||(e[4]=s(" Bestellingen ",-1))]),e[5]||(e[5]=d("p",{class:"text-sm text-muted-foreground"}," Beheer alle klantbestellingen ",-1))]),d("div",ye,[d("div",xe,[d("div",we,[l(t(P),{for:"search"},{default:a(()=>[...e[6]||(e[6]=[s("Zoeken",-1)])]),_:1}),d("div",Se,[l(t(ie),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l(t(re),{id:"search",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=n=>c.value=n),placeholder:"Bestelnummer of klant...",class:"pl-9"},null,8,["modelValue"])])]),d("div",$e,[l(t(P),{for:"status"},{default:a(()=>[...e[7]||(e[7]=[s("Status",-1)])]),_:1}),l(t(E),{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n)},{default:a(()=>[l(t(N),null,{default:a(()=>[l(t(q),{placeholder:"Alle statussen"})]),_:1}),l(t(A),null,{default:a(()=>[l(t(g),{value:"pending"},{default:a(()=>[...e[8]||(e[8]=[s("In behandeling",-1)])]),_:1}),l(t(g),{value:"confirmed"},{default:a(()=>[...e[9]||(e[9]=[s("Bevestigd",-1)])]),_:1}),l(t(g),{value:"completed"},{default:a(()=>[...e[10]||(e[10]=[s("Voltooid",-1)])]),_:1}),l(t(g),{value:"cancelled"},{default:a(()=>[...e[11]||(e[11]=[s("Geannuleerd",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),d("div",Ve,[l(t(h),{variant:"outline",onClick:G,disabled:!o.value&&!c.value},{default:a(()=>[...e[12]||(e[12]=[s(" Filters wissen ",-1)])]),_:1},8,["disabled"])])])]),i.value.length>0?(m(),b("div",Ce,[d("div",Be,[d("div",Pe,f(i.value.length)+" "+f(i.value.length===1?"bestelling":"bestellingen")+" geselecteerd ",1),d("div",je,[d("div",ze,[l(t(P),{for:"bulkStatus"},{default:a(()=>[...e[13]||(e[13]=[s("Status wijzigen naar",-1)])]),_:1}),d("div",Fe,[l(t(E),{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=n=>k.value=n)},{default:a(()=>[l(t(N),{class:"w-[180px]"},{default:a(()=>[l(t(q),{placeholder:"Selecteer status"})]),_:1}),l(t(A),null,{default:a(()=>[l(t(g),{value:"pending"},{default:a(()=>[...e[14]||(e[14]=[s("In behandeling",-1)])]),_:1}),l(t(g),{value:"confirmed"},{default:a(()=>[...e[15]||(e[15]=[s("Bevestigd",-1)])]),_:1}),l(t(g),{value:"completed"},{default:a(()=>[...e[16]||(e[16]=[s("Voltooid",-1)])]),_:1}),l(t(g),{value:"cancelled"},{default:a(()=>[...e[17]||(e[17]=[s("Geannuleerd",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(t(h),{onClick:W,disabled:!k.value},{default:a(()=>[l(t(pe),{class:"h-4 w-4 mr-2"}),e[18]||(e[18]=s(" Bijwerken ",-1))]),_:1},8,["disabled"])])]),l(t(h),{variant:"outline",onClick:J},{default:a(()=>[l(t(ce),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=s(" Download pakbonnen (ZIP) ",-1))]),_:1})])])])):j("",!0),u.orders.data.length===0?(m(),b("div",Ie,[e[20]||(e[20]=d("p",{class:"text-muted-foreground"},"Geen bestellingen gevonden",-1)),d("p",Le,f(o.value||c.value?"Probeer een andere zoekopdracht of filter":"Er zijn nog geen bestellingen"),1)])):(m(),b("div",De,[l(t(de),null,{default:a(()=>[l(t(oe),null,{default:a(()=>[l(t(M),null,{default:a(()=>[l(t(v),{class:"w-12"},{default:a(()=>[d("input",{type:"checkbox",checked:H.value,onChange:e[3]||(e[3]=n=>Z(n.target.checked)),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ee)]),_:1}),l(t(v),null,{default:a(()=>[...e[21]||(e[21]=[s("Bestelnummer",-1)])]),_:1}),l(t(v),null,{default:a(()=>[...e[22]||(e[22]=[s("Klant",-1)])]),_:1}),l(t(v),null,{default:a(()=>[...e[23]||(e[23]=[s("Datum",-1)])]),_:1}),l(t(v),null,{default:a(()=>[...e[24]||(e[24]=[s("Totaal",-1)])]),_:1}),l(t(v),null,{default:a(()=>[...e[25]||(e[25]=[s("Producten",-1)])]),_:1}),l(t(v),null,{default:a(()=>[...e[26]||(e[26]=[s("Status",-1)])]),_:1}),l(t(v),{class:"text-right"},{default:a(()=>[...e[27]||(e[27]=[s("Acties",-1)])]),_:1})]),_:1})]),_:1}),l(t(ue),null,{default:a(()=>[(m(!0),b(V,null,U(u.orders.data,n=>(m(),y(t(M),{key:n.id},{default:a(()=>[l(t(_),null,{default:a(()=>[d("input",{type:"checkbox",checked:Q(n.id),onChange:C=>K(n.id,C.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ne)]),_:2},1024),l(t(_),{class:"font-medium"},{default:a(()=>[s(f(n.order_number),1)]),_:2},1024),l(t(_),null,{default:a(()=>[s(f(n.customer_name),1)]),_:2},1024),l(t(_),null,{default:a(()=>[s(f(n.created_at),1)]),_:2},1024),l(t(_),{class:"font-medium"},{default:a(()=>[s(f(R(n.total)),1)]),_:2},1024),l(t(_),null,{default:a(()=>[s(f(n.item_count)+" "+f(n.item_count===1?"product":"producten"),1)]),_:2},1024),l(t(_),null,{default:a(()=>[l(t(ae),{variant:T(n.status)},{default:a(()=>[s(f(n.status_label),1)]),_:2},1032,["variant"])]),_:2},1024),l(t(_),{class:"text-right"},{default:a(()=>[d("div",qe,[l(t($),{href:`/admin/orders/${n.id}`},{default:a(()=>[l(t(h),{size:"sm",variant:"outline"},{default:a(()=>[...e[28]||(e[28]=[s("Details",-1)])]),_:1})]),_:1},8,["href"]),d("a",{href:`/admin/orders/${n.id}/packing-slip`,target:"_blank"},[l(t(h),{size:"sm",variant:"outline"},{default:a(()=>[l(t(fe),{class:"h-4 w-4 mr-1"}),e[29]||(e[29]=s(" Pakbon ",-1))]),_:1})],8,Ae)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),u.orders.links&&u.orders.last_page>1?(m(),y(be,{key:0,links:u.orders.links,"current-page":u.orders.current_page,from:u.orders.from,to:u.orders.to,total:u.orders.total,"last-page":u.orders.last_page},null,8,["links","current-page","from","to","total","last-page"])):j("",!0)]))])]),_:1})],64))}});export{at as default};
