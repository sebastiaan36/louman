import{d as O,m as f,z as E,c as l,a as d,u as c,h as I,w as g,b as a,o,g as D,F as x,r as h,f as N,e as k,t as u,n as R,p as j}from"./app-Di3RSdmm.js";import{_ as F,a as G,b as A,c as Z,d as M}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqTKe9tn.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-49QvIm49.js";import{d as U}from"./index-BsePJUay.js";import{c as W}from"./createLucideIcon-DVVQDtR3.js";import"./useForwardPropsEmits-BhcpKy4a.js";import"./VisuallyHidden-BKH4SjpI.js";import"./index-1LP7WDE3.js";import"./useForwardExpose-Bohi4aPY.js";import"./index-BRBC5pXR.js";import"./check-E3qLcZEM.js";import"./useFormControl-CWyZg8VZ.js";const Y=W("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),q={class:"flex h-full flex-1 flex-col gap-6 p-6"},H={class:"flex items-center justify-between"},J={key:0,class:"text-sm text-muted-foreground"},K={class:"flex items-center gap-4"},P={key:0,class:"rounded-lg border border-dashed p-12 text-center"},Q={class:"text-muted-foreground"},X={key:1,class:"rounded-lg border"},ee=["onDragstart","onDragover","onDragenter"],te={class:"w-8 shrink-0 font-mono text-sm text-muted-foreground"},ae={class:"font-medium"},re={key:0,class:"text-sm text-muted-foreground"},pe=O({__name:"DeliveryRoute",props:{customers:{},selectedDay:{},days:{}},setup(m){const p=m,$=[{title:"Dashboard",href:U().url},{title:"Rijroute"}],b={maandag:"Maandag",dinsdag:"Dinsdag",woensdag:"Woensdag",donderdag:"Donderdag",vrijdag:"Vrijdag",zaterdag:"Zaterdag",zondag:"Zondag",ophalen:"Ophalen"},i=f([...p.customers]);E(()=>p.customers,e=>{i.value=[...e]});const w=e=>{j.visit(`/admin/delivery-route?day=${e}`)},s=f(null),v=f(null),V=e=>{s.value=e},S=(e,t)=>{e.preventDefault(),v.value=t},z=e=>{if(s.value===null||s.value===e)return;const t=i.value.splice(s.value,1)[0];i.value.splice(e,0,t),s.value=e},B=e=>{e.preventDefault(),v.value=null,s.value=null,L()},C=()=>{s.value=null,v.value=null},_=f(!1),L=()=>{_.value=!0,j.post("/admin/delivery-route/order",{day:p.selectedDay,order:i.value.map(e=>e.id)},{preserveScroll:!0,preserveState:!0,onFinish:()=>{_.value=!1}})};return(e,t)=>(o(),l(x,null,[d(c(I),{title:"Rijroute"}),d(T,{breadcrumbs:$},{default:g(()=>[a("div",q,[a("div",H,[t[0]||(t[0]=a("div",null,[a("h1",{class:"text-2xl font-bold"},"Rijroute"),a("p",{class:"text-sm text-muted-foreground"}," Sleep klanten om de bezorgroute per dag in te stellen ")],-1)),_.value?(o(),l("div",J,"Opslaan...")):D("",!0)]),a("div",K,[t[1]||(t[1]=a("label",{class:"text-sm font-medium"},"Leverdag",-1)),d(c(F),{"model-value":m.selectedDay,"onUpdate:modelValue":w},{default:g(()=>[d(c(G),{class:"w-48"},{default:g(()=>[d(c(A))]),_:1}),d(c(Z),null,{default:g(()=>[(o(!0),l(x,null,h(m.days,r=>(o(),N(c(M),{key:r,value:r},{default:g(()=>[k(u(b[r]??r),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),i.value.length===0?(o(),l("div",P,[a("p",Q,[t[2]||(t[2]=k(" Geen klanten met leverdag ",-1)),a("strong",null,u(b[m.selectedDay]??m.selectedDay),1)]),t[3]||(t[3]=a("p",{class:"mt-2 text-sm text-muted-foreground"}," Stel de leverdag in bij de klantinstellingen. ",-1))])):(o(),l("div",X,[(o(!0),l(x,null,h(i.value,(r,n)=>(o(),l("div",{key:r.id,draggable:"true",class:R(["flex cursor-grab items-center gap-4 border-b px-4 py-3 last:border-b-0 active:cursor-grabbing",{"bg-muted opacity-50":s.value===n,"border-t-2 border-t-primary":v.value===n&&s.value!==n}]),onDragstart:y=>V(n),onDragover:y=>S(y,n),onDragenter:y=>z(n),onDrop:B,onDragend:C},[d(c(Y),{class:"h-4 w-4 shrink-0 text-muted-foreground"}),a("span",te,u(n+1),1),a("span",ae,u(r.company_name),1),r.street_name?(o(),l("span",re," â€” "+u(r.street_name)+" "+u(r.house_number)+", "+u(r.city),1)):D("",!0)],42,ee))),128))]))])]),_:1})],64))}});export{pe as default};
